generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
    directUrl = env("DATABASE_URL_UNPOOLED")
}

model Birthday {
    userId        String   @map("user_id") @db.VarChar(19)
    user          User     @relation(fields: [userId], references: [id])
    guildId       String   @map("guild_id") @db.VarChar(19)
    guild         Guild    @relation(fields: [guildId], references: [id])
    birthday      String   @db.VarChar(10)
    inDeleteQueue Boolean  @default(false) @map("in_delete_queue")
    createdAt     DateTime @default(now()) @map("created_at")
    updatedAt     DateTime @updatedAt() @map("updated_at")

    @@unique([userId, guildId])
    @@map("birthday")
}

model Guild {
    id                   String     @id @db.VarChar(19)
    inviter              String?    @db.VarChar(20)
    channelsAnnouncement String?    @map("channels.announcement") @db.VarChar(19)
    channelsOverview     String?    @map("channels.overview") @db.VarChar(19)
    channelsLogs         String?    @map("channels.logs") @db.VarChar(19)
    messagesAnnouncement String?    @map("messages.announcement") @db.Text()
    messagesOverview     String?    @map("messages.overview") @db.VarChar(19)
    rolesBirthday        String?    @map("roles.birthday") @db.VarChar(19)
    rolesNotified        String?    @map("roles.notified") @db.VarChar(19)
    timezone             Int        @default(0)
    premium              Boolean    @default(false)
    language             String     @default("en-US") @db.VarChar(5)
    createdAt            DateTime   @default(now()) @map("created_at")
    updatedAt            DateTime   @updatedAt() @map("updated_at")
    inDeleteQueue        Boolean    @default(false) @map("in_delete_queue")
    birthday             Birthday[]

    @@map("guild")
}

model User {
    id            String     @id @db.VarChar(19)
    username      String?    @db.VarChar(32)
    discriminator String?    @db.VarChar(4)
    premium       Boolean    @default(false)
    createdAt     DateTime   @default(now()) @map("created_at")
    updatedAt     DateTime   @updatedAt() @map("updated_at")
    birthday      Birthday[]

    @@map("user")
}
